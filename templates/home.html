<!DOCTYPE html>
<html lang="en">
<head>
  <title>EMOTUNES</title>
  <link rel="stylesheet" href="{{url_for('static',filename='display.css')}}" />
  <link rel="icon" href="{{url_for('static',filename='eye.png')}}" type="image/png" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <style>
    /* Your custom CSS styles */
    body {
        background-image: linear-gradient(90deg, #eeeeee, #eeeeee);
    }
    .flex-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
    .area {
        background: #4e54c8;
        background: -webkit-linear-gradient(to left, #8f94fb, #4e54c8);
        width: 100%;
        height: 100%;
    }
    .circles {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }
    .circles li {
        position: absolute;
        display: block;
        list-style: none;
        width: 20px;
        height: 20px;
        background: rgba(255, 255, 255, 0.2);
        animation: animate 25s linear infinite;
        bottom: -150px;
    }
    .circles li:nth-child(1) {
        left: 25%;
        width: 80px;
        height: 80px;
        animation-delay: 0s;
    }
    .circles li:nth-child(2) {
        left: 10%;
        width: 20px;
        height: 20px;
        animation-delay: 2s;
        animation-duration: 12s;
    }
    .circles li:nth-child(3) {
        left: 70%;
        width: 20px;
        height: 20px;
        animation-delay: 4s;
    }
    .circles li:nth-child(4) {
        left: 40%;
        width: 60px;
        height: 60px;
        animation-delay: 0s;
        animation-duration: 18s;
    }
    .circles li:nth-child(5) {
        left: 65%;
        width: 20px;
        height: 20px;
        animation-delay: 0s;
    }
    .circles li:nth-child(6) {
        left: 75%;
        width: 110px;
        height: 110px;
        animation-delay: 3s;
    }
    .circles li:nth-child(7) {
        left: 35%;
        width: 150px;
        height: 150px;
        animation-delay: 7s;
    }
    .circles li:nth-child(8) {
        left: 50%;
        width: 25px;
        height: 25px;
        animation-delay: 15s;
        animation-duration: 45s;
    }
    .circles li:nth-child(9) {
        left: 20%;
        width: 15px;
        height: 15px;
        animation-delay: 2s;
        animation-duration: 35s;
    }
    .circles li:nth-child(10) {
        left: 85%;
        width: 150px;
        height: 150px;
        animation-delay: 0s;
        animation-duration: 11s;
    }
    @keyframes animate {
        0% {
            transform: translateY(0) rotate(0deg);
            opacity: 1;
            border-radius: 0;
        }
        100% {
            transform: translateY(-1000px) rotate(720deg);
            opacity: 0;
            border-radius: 50%;
        }
    }
    .container {
            text-align: center;
        }

        .tracks-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            align-items: center;
        }

        .track {
            width: 30%; /* Adjust as needed */
            margin: 10px;
            text-align: center;
        }
  </style>
</head>
<!-- The rest of your HTML code remains the same -->

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="{{url_for('dashboard')}}">
        <img class="img_logo" src="{{url_for('static',filename='eye.png')}}" alt="" srcset="">
        <span class="content_nav">
          EMOTUNES
        </span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse feedback_" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <span style="color: green; font-size: medium; font-style: italic;">Welcome,</span>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="area">

    <center>
      <div class="flex-container" >
      <div class="container">

    

        <hr>

        <div id="captured-image-container">
          <video id="captured-video" autoplay="true" playsinline></video>
          <canvas id="captured-canvas" style="display: none;"></canvas>
        </div><br>
        <button id="captureButton" class="btn btn-primary">Capture Photo</button>
        <hr>

        <h4 style="text-align: center;">Detected Emotion</h4>
        <div id="emotion-html"></div>

        <hr>

        <h4 style="text-align: center;">Top Tracks</h4>
        <div class="row">
          <div class="tracks-container" id="track-html">
            <!-- Sample track div, repeat for each track -->
            <div class="track">
              Track 1
            </div>
            <div class="track">
              Track 2
            </div>
            <div class="track">
              Track 3
            </div>
            <!-- Add more track divs as needed -->
          </div>
        </div>
      </div>
      
    </center>
    <br><br><br><br><br>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>
</body>
<script>
  const captureButton = document.getElementById('captureButton');
  const video = document.getElementById('captured-video');
  const canvas = document.getElementById('captured-canvas');
  
  captureButton.addEventListener('click', async () => {
      try {
          // Get access to the webcam stream
          const stream = await navigator.mediaDevices.getUserMedia({ video: true });
          video.srcObject = stream;

          // Wait for the video to load
          await new Promise((resolve) => {
              video.onloadeddata = resolve;
          });

          // Capture a snapshot from the video
          canvas.width = video.videoWidth;
          canvas.height = video.videoHeight;
          canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);

          // Convert the canvas to a Blob
          canvas.toBlob(async (blob) => {
              // Create a FormData object and append the blob as 'picture'
              const formData = new FormData();
              formData.append('picture', blob, 'image.jpg');

              // Send the image to the Flask server
              const response = await fetch('/', {
                  method: 'POST',
                  body: formData
              });

              const data = await response.json();

              // Update the emotion and track sections
              const emotionHtml = document.getElementById('emotion-html');
              emotionHtml.innerHTML = data.emotion_html;

              const trackHtml = document.getElementById('track-html');
              trackHtml.innerHTML = data.track_html;
          }, 'image/jpeg');
      } catch (error) {
          console.error(error);
      }
  });
</script>
</html>
